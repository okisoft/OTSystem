<% if current_user.admin? %> <%# 管理者用のパーツを表示する %>
  <% provide(:title, '質問一覧画面') %>
  <h3>質問一覧画面</h3>
<% else %> <%# 学生用のパーツを表示する %>
  <% provide(:title, '過去の質問一覧画面') %>
  <h3>過去の質問一覧画面</h3>
<% end %>

<% @question = Question.new unless @question %>

<div class="row justify-content-center">
  <div class="col-md-8">
    <% if current_user.admin? %> <%# 管理者用のパーツを表示する %>
    <% else %> <%# 学生用のパーツを表示する %>
      <%= link_to "質問をする", new_question_path(@question), class: "btn btn-primary" %>
      <%= link_to "今年度の質問", home_path(@question), class: "btn btn-primary" %>
    <% end %>
    <% @problems.each do |problem| %>
      <% questions = problem.questions %>
      <% questions.each do |question| %>
        <% if current_user.admin? || question.visible %> <%# 未公開設定でも管理者は見られるように %>
          <li style="list-style:none;margin-bottom: 10px;">
            <%= question.problem.name %>
            <%= question.user.id %>
            <%= question.content %>
            <%= question.reply %>

            <% if current_user.admin? %> <%# 管理者用のパーツを表示する %>
              <%= link_to "回答する", edit_question_path(question), class: "btn btn-primary" %>
            <% end %>
          </li>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
